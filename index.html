function telaMenu() {
    gameActive = false; 
    document.getElementById('death-screen').classList.add('hidden');
    document.getElementById('main-content').innerHTML = `
        <div class="menu-card">
            <h1>BOLACHA MAKER</h1>
            <div id="rank-box">A carregar o Ranking Real...</div>
            <button class="btn btn-cyan" onclick="telaGaleria()">â–¶ JOGAR</button>
            <button class="btn btn-purple" onclick="telaEditor()">ğŸ›  CRIAR</button>
            <button class="btn" style="background:var(--yellow); color:black" onclick="telaLoja()">ğŸ›’ LOJA</button>
        </div>
    `;

    // NOVO SISTEMA DE RANKING GARANTIDO
    db.ref('ranking').once('value', s => {
        let players = [];
        s.forEach(u => {
            let data = u.val();
            if (data && typeof data.moedas === 'number') {
                players.push({ n: u.key, m: data.moedas });
            }
        });

        // Ordena do maior para o menor moedas
        players.sort((a, b) => b.m - a.m);

        let h = "<b>ğŸ† TOP 5 PLAYERS</b><br>";
        // Pega apenas os 5 primeiros
        players.slice(0, 5).forEach((u, i) => {
            let medalha = i === 0 ? "ğŸ¥‡ " : (i === 1 ? "ğŸ¥ˆ " : (i === 2 ? "ğŸ¥‰ " : ""));
            h += `<div class="rank-line"><span>${medalha}${i+1}. ${u.n}</span><span>$${Math.floor(u.m)}</span></div>`;
        });
        
        if(players.length === 0) h = "Sem jogadores no ranking ainda.";
        document.getElementById('rank-box').innerHTML = h;
    });
}
