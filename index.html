<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MAKER GAME PRO - JOG√ÅVEL</title>
    <style>
        :root { --cyan: #00f2ff; --purple: #bc13fe; --yellow: #ffcc00; --red: #ff4444; --bg: #050510; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: var(--bg); color: white; overflow: hidden; }
        .hidden { display: none !important; }

        /* HEADER */
        #header { background: #0a0a20; padding: 12px 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--cyan); }
        .badge-dono { background: var(--yellow); color: black; padding: 2px 8px; border-radius: 4px; font-weight: bold; font-size: 12px; }

        /* MENU */
        #main-menu { height: 85vh; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 20px; }
        .menu-button { width: 260px; padding: 18px; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 16px; text-transform: uppercase; transition: 0.3s; }
        .btn-cyan { background: var(--cyan); color: black; box-shadow: 0 0 15px var(--cyan); }
        .btn-purple { background: var(--purple); color: white; box-shadow: 0 0 15px var(--purple); }

        /* EDITOR E GRID */
        #level-editor { display: flex; height: calc(100vh - 65px); }
        #sidebar { width: 120px; background: #0a0a20; display: flex; flex-direction: column; gap: 10px; padding: 15px; border-right: 1px solid #333; }
        .tool { padding: 12px; background: #1a1a3a; border: 1.5px solid #444; color: white; cursor: pointer; text-align: center; border-radius: 8px; font-size: 11px; font-weight: bold; }
        .tool.active { border-color: var(--cyan); background: #004455; box-shadow: 0 0 10px var(--cyan); }
        #editor-main { flex: 1; display: flex; align-items: center; justify-content: center; background: #000; }
        #grid-canvas { display: grid; grid-template-columns: repeat(20, 1fr); width: 95vw; max-width: 600px; aspect-ratio: 4/3; border: 2px solid #222; }
        .cell { border: 0.1px solid rgba(255,255,255,0.05); display: flex; align-items: center; justify-content: center; }

        /* BLOCOS */
        .block { background: #555; border: 1px solid #777; }
        .lava { background: #ff4400; box-shadow: inset 0 0 10px #000; }
        .spawn { background: #00ff00 !important; border: 2px solid white !important; box-shadow: 0 0 15px #00ff00; }
        .flag { background: #ffcc00 !important; border: 2px solid white !important; box-shadow: 0 0 15px #ffcc00; border-radius: 0 50% 50% 0; }

        /* TELAS ADICIONAIS */
        .screen-overlay { padding: 20px; text-align: center; height: 80vh; overflow-y: auto; }
        #admin-panel { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #111; border: 2px solid var(--red); padding: 25px; border-radius: 15px; z-index: 1000; width: 280px; }
    </style>
</head>
<body>

    <div id="header">
        <div style="font-weight: bold; color: var(--cyan); font-size: 20px;">MAKER PRO</div>
        <div style="display: flex; align-items: center; gap: 15px;">
            <button id="btn-admin-open" class="hidden" onclick="abrirAdmin()" style="background:var(--red); color:white; border:none; padding:5px 10px; cursor:pointer;">ADMIN</button>
            <div>Bolacha <span class="badge-dono">DONO</span></div>
            <div style="color: var(--yellow); font-weight: bold;">üí∞ <span id="coins">0</span></div>
        </div>
    </div>

    <div id="main-menu">
        <button class="menu-button btn-cyan" onclick="mudarTela('editor')">Criar Novo Mapa</button>
        <button class="menu-button btn-purple" onclick="mudarTela('niveis')">Jogar N√≠veis</button>
    </div>

    <div id="levels-screen" class="hidden screen-overlay">
        <h2 style="color: var(--purple);">MEUS N√çVEIS PUBLICADOS</h2>
        <div id="levels-container" style="display: flex; flex-direction: column; gap: 10px; align-items: center; margin: 20px 0;">
            </div>
        <button class="menu-button" style="background: #444; color: white;" onclick="location.reload()">Voltar ao Menu</button>
    </div>

    <div id="editor-ui" class="hidden">
        <div id="level-editor">
            <div id="sidebar">
                <div class="tool" id="t-block" onclick="setTool('block')">BLOCO (5)</div>
                <div class="tool" id="t-lava" onclick="setTool('lava')">LAVA (5)</div>
                <div class="tool" id="t-spawn" onclick="setTool('spawn')" style="color:#0f0">SPAWN</div>
                <div class="tool" id="t-flag" onclick="setTool('flag')" style="color:#ff0">META</div>
                <div class="tool" id="t-sell" onclick="setTool('sell')" style="color:var(--red);">VENDER</div>
                <button onclick="publicar()" style="background:var(--cyan); border:none; padding:12px; border-radius:8px; font-weight:bold; margin-top:20px; cursor:pointer;">PUBLICAR</button>
                <button onclick="location.reload()" style="background:none; color:white; border:1px solid #444; padding:5px; margin-top:10px; cursor:pointer;">SAIR</button>
            </div>
            <div id="editor-main"><div id="grid-canvas"></div></div>
        </div>
    </div>

    <div id="admin-panel" class="hidden">
        <h3 style="color: var
