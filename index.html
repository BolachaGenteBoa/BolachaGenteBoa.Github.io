<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BOLACHA MAKER - OFICIAL</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <style>
        :root { --cyan: #00f2ff; --purple: #bc13fe; --yellow: #ffcc00; --red: #ff4444; --bg: #050510; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: var(--bg); color: white; overflow: hidden; }
        .hidden { display: none !important; }

        /* HEADER FIXO */
        #header { background: #0a0a20; padding: 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid var(--cyan); position: relative; z-index: 1000; }
        
        /* TELAS */
        .screen { width: 100vw; height: calc(100vh - 60px); display: flex; flex-direction: column; align-items: center; justify-content: center; position: absolute; top: 60px; left: 0; background: var(--bg); }

        /* BOT√ïES */
        .menu-button { width: 280px; padding: 20px; border: none; border-radius: 15px; font-weight: bold; cursor: pointer; font-size: 18px; text-transform: uppercase; margin-bottom: 15px; transition: 0.2s; }
        .btn-cyan { background: var(--cyan); color: black; box-shadow: 0 0 15px var(--cyan); }
        .btn-purple { background: var(--purple); color: white; box-shadow: 0 0 15px var(--purple); }
        .btn-gray { background: #333; color: white; }

        /* EDITOR E GRID */
        #editor-container { display: flex; width: 100%; height: 100%; }
        #sidebar { width: 100px; background: #0a0a20; padding: 10px; display: flex; flex-direction: column; gap: 8px; border-right: 1px solid #333; overflow-y: auto; }
        .tool { padding: 10px; background: #1a1a3a; border: 1.5px solid #444; font-size: 10px; text-align: center; border-radius: 8px; cursor: pointer; }
        .tool.active { border-color: var(--cyan); background: #004455; }
        #grid-canvas { display: grid; grid-template-columns: repeat(20, 1fr); background: #000; flex-grow: 1; border: 1px solid #222; }
        .cell { border: 0.1px solid #111; display: flex; align-items: center; justify-content: center; font-size: 15px; }

        /* JOGO */
        #game-view { position: relative; width: 100%; height: 60%; background: #000; overflow: hidden; }
        #player { position: absolute; width: 20px; height: 20px; background: var(--cyan); border-radius: 4px; z-index: 100; box-shadow: 0 0 10px var(--cyan); }
        .block-obj { position: absolute; width: 35px; height: 35px; }
        #controls { width: 100%; height: 40%; background: #0a0a20; display: flex; justify-content: space-around; align-items: center; }

        /* CLASSES DE BLOCO */
        .b-block { background: #555; }
        .b-lava { background: var(--red); box-shadow: inset 0 0 10px #000; }
        .b-bomba { background: #333; border-radius: 50%; border: 2px solid #000; }
        .b-bomba::after { content: 'üí£'; }
        .b-flag { background: var(--yellow); }
    </style>
</head>
<body>

    <div id="header">
        <div style="font-weight: bold; color: var(--cyan); font-size: 20px;">BOLACHA MAKER</div>
        <div>üí∞ <span id="coins">0</span></div>
    </div>

    <div id="screen-menu" class="screen">
        <h1 style="margin-bottom: 30px; color: var(--cyan);">MENU PRINCIPAL</h1>
        <button class="menu-button btn-cyan" onclick="mudarTela('screen-editor')">CRIAR MEU MAPA</button>
        <button class="menu-button btn-purple" onclick="abrirGaleria()">JOGAR N√çVEIS ONLINE</button>
        <button class="menu-button btn-gray" onclick="alert('Ranking em breve!')">RANKING</button>
    </div>

    <div id="screen-editor" class="screen hidden" style="justify-content: flex-start;">
        <div id="editor-container">
            <div id="sidebar">
                <div class="tool active" id="t-block" onclick="setTool('block')">BLOCO</div>
                <div class="tool" id="t-lava" onclick="setTool('lava')">LAVA</div>
                <div class="tool" id="t-bomba" onclick="setTool('bomba')">BOMBA</div>
                <div class="tool" id="t-spawn" onclick="setTool('spawn')">IN√çCIO</div>
                <div class="tool" id="t-flag" onclick="setTool('flag')">META</div>
                <div class="tool" onclick="setTool('sell')" style="color:var(--red)">APAGAR</div>
                <button onclick="publicarMapa
